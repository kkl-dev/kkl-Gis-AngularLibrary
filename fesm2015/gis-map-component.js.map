{"version":3,"file":"gis-map-component.js","sources":["../../../projects/gis-map-component/src/GisBase.service.ts","../../../projects/gis-map-component/src/lib/gis-map-component.service.ts","../../../projects/gis-map-component/src/lib/gis-map-component.component.ts","../../../projects/gis-map-component/src/lib/gis-map-component.module.ts","../../../projects/gis-map-component/src/public-api.ts","../../../projects/gis-map-component/src/gis-map-component.ts"],"sourcesContent":["import { Inject, Injectable, isDevMode, Optional } from '@angular/core';\r\nimport { TestBed } from '@angular/core/testing';\r\n\r\n\r\n@Injectable()\r\nexport class GisBaseService {\r\n  public apiUrl = \"\";\r\n   \r\n    constructor(@Inject('environmentFile') private config: any ) {\r\n        this.apiUrl = config.GisApiUrl\r\n       //this.apiUrl = 'https://kkl-yaaranutgisapi.azurewebsites.net';\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GisMapComponentService {\n\n  constructor() { }\n}\n","import {\r\n  Component, ElementRef, OnInit, ViewChild, ViewEncapsulation, Input,  Output,  EventEmitter,  OnDestroy } from '@angular/core';\r\n\r\n \r\nimport { loadModules } from \"esri-loader\";\r\n//import esri = __esri;\r\n\r\n//import WebMap from \"@arcgis/core/WebMap\";\r\nimport MapView from \"@arcgis/core/views/MapView\";\r\n//import LayerList from \"@arcgis/core/widgets/LayerList\";\r\nimport Handles from \"@arcgis/core/core/Handles\";\r\n\r\nimport Zoom from \"@arcgis/core/widgets/Zoom\";\r\nimport Compass from \"@arcgis/core/widgets/Compass\";\r\nimport ScaleBar from \"@arcgis/core/widgets/ScaleBar\";\r\nimport BasemapGallery from \"@arcgis/core/widgets/BasemapGallery\";\r\nimport Legend from \"@arcgis/core/widgets/Legend\";\r\nimport Measurement from \"@arcgis/core/widgets/Measurement\";\r\n//import Search from \"@arcgis/core/widgets/Search\";\r\nimport FeatureLayer from \"@arcgis/core/layers/FeatureLayer\";\r\nimport LayerView from \"@arcgis/core/views/layers/LayerView\";\r\nimport { GisBaseService } from '../GisBase.service';\r\nimport Point from \"@arcgis/core/geometry/Point\";\r\nimport Geometry from \"@arcgis/core/geometry/Geometry\";\r\nimport SpatialReference from \"@arcgis/core/geometry/SpatialReference\";\r\n\r\n@Component({\r\n  selector: 'GisBase-GisMapComponent',\r\n  template: `\r\n \r\n<div class='az' style=\"width:100%;height: 100%;position: relative \">\r\n    <div #mapViewNode style=\"width:100%;height: 100%;  \">\r\n   \r\n      <div id=\"toolbarDiv222\" style=\"position: absolute;margin-left: -50px;\" class=\"e____sri-component esri-widget\">\r\n        <button  #buttonLegend (click)=\"buttonLegendClick()\" class=\"esri-widget--button esri-interactive esri-icon-legend\" title=\"legend Panel\">    </button>\r\n        <button  #buttonDistance (click)=\"distanceMeasurement()\" class=\"esri-widget--button esri-interactive esri-icon-measure-line\" title=\"Distance Measurement Tool\">    </button>\r\n        <button  #buttonArea (click)=\"areaMeasurement()\"  class=\"esri-widget--button esri-interactive esri-icon-measure-area\" title=\"Area Measurement Tool\">    </button>\r\n        <button  style=\"display:none\" #buttonClear class=\"esri-widget--button esri-interactive esri-icon-trash\" title=\"Clear Measurements\">     </button>\r\n      </div>\r\n  </div>\r\n  <div #divMassage style=\"display:none;position: absolute;top: 25%;left: 0px;width:100%\">\r\n    <div #divMassageText style=\"margin: auto;width: fit-content;background-color:powderblue;padding: 10px\" >לא נימצאו פוליגונים מתאימים לחיפוש</div>\r\n  </div>\r\n</div>\r\n  `,\r\n  styleUrls: ['gis-map-component.component.css']\r\n//   < div #layerListDiv > </div>\r\n\r\n//< div #basemapGalleryDiv > </div>\r\n})\r\n  \r\nexport class GisMapComponentComponent implements OnInit {\r\n\r\n  linkProm = loadCustomStyle('https://js.arcgis.com/4.23/esri/themes/light/main.css');\r\n\r\n  private divMassage!: ElementRef;\r\n  @ViewChild('divMassage', { static: true }) set content8(content: ElementRef) { if (content) { this.divMassage = content; } }\r\n  private divMassageText!: ElementRef;\r\n  @ViewChild('divMassageText', { static: true }) set contentDivMassageText(content: ElementRef) { if (content) { this.divMassageText = content; } }\r\n\r\n  \r\n  private mapViewEl!: ElementRef;\r\n  @ViewChild('mapViewNode', { static: true }) set content(content: ElementRef) { if (content) { this.mapViewEl = content; } }\r\n  private layerListDiv!: ElementRef;\r\n  @ViewChild('layerListDiv', { static: true }) set content2(content: ElementRef) { if (content) { this.layerListDiv = content; }  }\r\n  private basemapGalleryDiv!: ElementRef;\r\n  @ViewChild('basemapGalleryDiv', { static: true }) set content1(content: ElementRef) {  if (content) { this.basemapGalleryDiv = content; }  }\r\n\r\n  private buttonLegend!: HTMLElement;\r\n  @ViewChild('buttonLegend', { static: true }) set content7(content: ElementRef) { if (content) { this.buttonLegend = content.nativeElement; } }\r\n  private buttonDistance!: HTMLElement;\r\n  @ViewChild('buttonDistance', { static: true }) set content3(content: ElementRef) { if (content) { this.buttonDistance = content.nativeElement; } }\r\n  private buttonArea!: HTMLElement;\r\n  @ViewChild('buttonArea', { static: true }) set content4(content: ElementRef) { if (content) { this.buttonArea = content.nativeElement; } }\r\n  private buttonClear!: HTMLElement;\r\n  @ViewChild('buttonClear', { static: true }) set content5(content: ElementRef) { if (content) { this.buttonClear = content.nativeElement; } }\r\n  private buttonSwitch!: HTMLElement;\r\n  @ViewChild('buttonSwitch', { static: true }) set content6(content: ElementRef) { if (content) { this.buttonSwitch = content.nativeElement; } }\r\n\r\n   \r\n  private layerHelkotView!: LayerView\r\n  private LayerList!: string[];\r\n  private QueryLayer!: string;\r\n  private QueryStr!: string;\r\n  private QueryResultEmpty!: string;\r\n  private legend!: Legend;\r\n  private measurement!: Measurement;\r\n\r\n  @Input()\r\n  set layerList(value: string[]) {\r\n    this.LayerList = value;\r\n  }\r\n  @Input()\r\n  set queryLayer(value: string) {    \r\n    this.QueryLayer = value;\r\n  }\r\n  @Input()\r\n  set queryStr(value: string) {\r\n    this.QueryStr = value;\r\n    this.MakeQuery();\r\n  }    \r\n  @Input()\r\n  set queryResultEmpty(value: string) {\r\n    this.QueryResultEmpty = value;\r\n  }\r\n\r\n  private queryFeatureLayer! : FeatureLayer  \r\n  private view!: MapView;\r\n  private layerView: any;\r\n  FeatureHighlights = [];\r\n\r\n  constructor(private gisBaseService: GisBaseService) { }\r\n\r\n  \r\n  async initializeMap() {\r\n    try {\r\n      await this.linkProm;\r\n      const divMassage = this.divMassage;\r\n      \r\n      const [MapView, WebMap, LayerList, FeatureLayer,\r\n        Search, Measurement, Legend,\r\n        Point, SpatialReference] = await loadModules([\r\n        \"esri/views/MapView\", \"esri/WebMap\",\r\n        \"esri/widgets/LayerList\",  \"esri/layers/FeatureLayer\",\r\n          \"esri/widgets/Search\", \"esri/widgets/Measurement\", \"esri/widgets/Legend\",\r\n          \"esri/geometry/Point\", \"esri/geometry/SpatialReference\"\r\n      ]);\r\n      \r\n      const webMap = new WebMap({\r\n        basemap: \"topo\"\r\n      });\r\n\r\n      this.view = new MapView({\r\n        container: this.mapViewEl.nativeElement,\r\n        map: webMap\r\n      });\r\n      //this.view.center = [31.744037, 35.049995];\r\n    //  let featerLayer = new FeatureLayer({\r\n    //  //url: \"https://services2.arcgis.com/utNNrmXb4IZOLXXs/ArcGIS/rest/services/JNFILForest/FeatureServer/0\"\r\n    //  url: \"https://kklrgm.kkl.org.il/kklags/rest/services/allLayersForAgol/FeatureServer/7\"\r\n    //});\r\n    //let featerLayer1 = new FeatureLayer({\r\n    //  url: \"https://services2.arcgis.com/utNNrmXb4IZOLXXs/ArcGIS/rest/services/JNFILForest/FeatureServer\"      \r\n    //});\r\n\r\n      this.LayerList.forEach((layerStr)=>   {\r\n        const featureLayer = new FeatureLayer({\r\n          url: this.gisBaseService.apiUrl + \"/ArcGIS/rest/services/\" + layerStr,\r\n          \r\n        });\r\n        webMap.add(featureLayer);\r\n        if (layerStr.includes(this.QueryLayer)) { this.queryFeatureLayer = featureLayer }\r\n      });\r\n      \r\n      await this.view.when(() => {\r\n        var layerList = new LayerList({ view: this.view  });\r\n        //view.ui.add(layerList, \"top-right\");\r\n        var search = new Search({ view: this.view});\r\n        //view.ui.add(search, \"top-right\");\r\n        var zoom = new Zoom({ view: this.view,  layout: \"horizontal\"  });\r\n        //view.ui.add(zoom, \"bottom-right\");\r\n        const compassWidget = new Compass({ view: this.view   });\r\n        this.view.ui.add(compassWidget, \"top-left\");\r\n        const scaleBar = new ScaleBar({ view: this.view, unit: \"metric\", style: \"ruler\"    });\r\n        //view.ui.add(scaleBar, { position: \"bottom-left\"});\r\n        //const basemapGallery = new BasemapGallery({  view: view,    container: document.createElement(\"div\")    });\r\n        //view.ui.add(basemapGallery, {   position: \"top-right\"    });\r\n            \r\n        this.legend = new Legend({ view: this.view, style: { type: \"classic\", layout: 'stack' }, layerInfos: [{ layer: this.queryFeatureLayer, title: \"שכבת חלקות\" }] });\r\n        //view.ui.add(this.legend, \"bottom-right\");\r\n        this.measurement = new Measurement({ view: this.view });\r\n        this.view.ui.add(this.measurement, \"bottom-right\");\r\n        \r\n        ////this.buttonSwitch.addEventListener(\"click\", () => { this.switchView(Map, this.queryFeatureLayer,  measurement); });\r\n        //this.buttonDistance.addEventListener(\"click\", () => { this.distanceMeasurement( measurement); });\r\n        //this.buttonArea.addEventListener(\"click\", () => { this.areaMeasurement(measurement); });\r\n        //this.buttonClear.addEventListener(\"click\", () => { this.clearMeasurements(measurement); });\r\n\r\n        //const EsriPwoerByelements = document.getElementsByClassName(\"esri-attribution__sources esri-interactive\");\r\n        //for (let i = 0; i < EsriPwoerByelements.length; i++) {\r\n        //  EsriPwoerByelements[i].setAttribute(\"style\", \"display:none\");\r\n        //}\r\n        const EsriPwoerByelements1 = document.getElementsByClassName(\"esri-attribution__powered-by\");        \r\n        for (let i = 0; i < EsriPwoerByelements1.length; i++) {\r\n          EsriPwoerByelements1[i].setAttribute(\"style\", \"display:none\");\r\n          const az = EsriPwoerByelements1[i].previousElementSibling;\r\n          if (az!=null) az.setAttribute(\"style\", \"display:none\");\r\n        }\r\n        \r\n        //this.featerLayerHelkot.definitionExpression = \"GUSH_NUM=\" + this._gush + \" and PARCEL=\" + this._PARCEL;\r\n        //this.featerLayerHelkot.when(\r\n        //  () => {\r\n            //const query = this.featerLayerHelkot.createQuery();\r\n            //query.where = \"GUSH_NUM=\" + this._gush + \" and PARCEL=\" + this._PARCEL;\r\n            //query.outSpatialReference = view.spatialReference;\r\n            //var az = this.featerLayerHelkot.queryFeatures(query)\r\n            //az.then(function (results) {\r\n            //  view.highlight(results);\r\n            //});  \r\n            //this.featerLayerHelkot.queryExtent(query)\r\n            //  .then(response => {\r\n            //    if (response.extent !== null) {\r\n            //      response.extent.spatialReference = view.spatialReference;\r\n            //      view.goTo(response.extent.expand(3));\r\n                  \r\n            //    }\r\n            //  });\r\n         /* });*/\r\n      });\r\n\r\n      this.view.whenLayerView(this.queryFeatureLayer).then((layerView: any  ) => {\r\n        this.layerView = layerView;\r\n        this.MakeQuery()\r\n        //this.queryFeatureLayer.queryExtent(query)\r\n        //  .then(response => {\r\n        //    if (response.extent !== null) {\r\n        //      response.extent.spatialReference = view.spatialReference;\r\n        //      view.goTo({  geometry: response.extent.expand(3) });\r\n        //    }\r\n        //  });\r\n      });\r\n      return this.view;\r\n    }\r\n    catch(error) {\r\n      console.log(\"EsriLoader: \", error);\r\n      return null;\r\n    }\r\n  }   \r\n\r\n  ngOnInit()  {\r\n    this.initializeMap().then(() => {\r\n      this.divMassageText.nativeElement.innerText = this.QueryResultEmpty;\r\n      console.log(\"View ready\");\r\n    });    \r\n  }\r\n  MakeQuery() {\r\n    const view = this.view;\r\n    const layerView = this.layerView;\r\n    const divMassage = this.divMassage;\r\n    let FeatureHighlights = this.FeatureHighlights;\r\n\r\n    if (this.queryFeatureLayer !== undefined) {\r\n      if (FeatureHighlights.length > 0) {\r\n        FeatureHighlights.forEach(function (highlight: Handles) {\r\n          highlight.remove();\r\n        });\r\n        FeatureHighlights = [];\r\n      }\r\n      const query = this.queryFeatureLayer.createQuery();\r\n      query.where = this.QueryStr;\r\n      query.outSpatialReference = this.view.spatialReference;\r\n      var az = this.queryFeatureLayer.queryFeatures(query)\r\n      az.then(function (results) {\r\n\r\n        if (results.features.length > 0) {\r\n          divMassage.nativeElement.style.display = 'none';\r\n          let FeatureHighlights1 = layerView.highlight(results.features[0]) as never;\r\n          FeatureHighlights.push(FeatureHighlights1);\r\n          /*view.goTo({ geometry: results.features[0].geometry.extent.expand(3) });*/\r\n          //var p: Point;\r\n          //p = results.features[0].geometry as Point;\r\n          //p.spatialReference = new SpatialReference({ wkid: 3857 });\r\n          //view.spatialReference = new SpatialReference({ wkid: 3857 });\r\n          //view.goTo({\r\n          //  /*target: [35.049995, 31.744037]*/\r\n          //  /*target: [222000, 630000]*/\r\n          //  /*target: p*/\r\n          //  target: [3926637.1977999993, 3860628.0922000031]\r\n          //})\r\n          view.when(function () {\r\n            view.goTo({\r\n              target: results.features[0], // Graphic object\r\n              zoom: 20\r\n            });\r\n          });\r\n        }\r\n        else {\r\n          divMassage.nativeElement.style.display = '';\r\n        }\r\n      });\r\n    }\r\n  }\r\n  buttonLegendClick() {\r\n    this.legend.visible = !this.legend.visible;\r\n  }\r\n  //switchView(Map: MapConstructor, layerView: any, measurement: any) {\r\n\r\n  //  // Clone the viewpoint for the MapView or SceneView\r\n  //  const viewpoint = layerView.viewpoint.clone();\r\n  //  // Get the view type, either 2d or 3d\r\n  //  const type = layerView.type;\r\n\r\n  //  // Clear any measurements that had been drawn\r\n  //  this.clearMeasurements(measurement);\r\n\r\n  //  // Reset the measurement tools in the div\r\n  //  layerView.container = null;\r\n  //  layerView = null;\r\n  //  // Set the view based on whether it switched to 2D MapView or 3D SceneView\r\n  //  layerView = Map;\r\n  //  layerView.set({\r\n  //    container: \"viewDiv\",\r\n  //    viewpoint: viewpoint\r\n  //  });\r\n  //}\r\n  //clearMeasurements(measurement: any) {\r\n  //  const distanceButton = document.getElementById('distance');\r\n  //  const areaButton = document.getElementById('area');\r\n  //  this.buttonDistance.classList.remove(\"active\");\r\n  //  this.buttonArea.classList.remove(\"active\");\r\n  //  measurement.clear();\r\n  //}\r\n  distanceMeasurement(  ) {\r\n    this.measurement.activeTool  = \"distance\";    \r\n    this.buttonDistance.classList.add(\"active\");\r\n    this.buttonArea.classList.remove(\"active\");\r\n  }\r\n  areaMeasurement( ) {\r\n    this.measurement.activeTool = \"area\";\r\n    this.buttonDistance.classList.remove(\"active\");\r\n    this.buttonArea.classList.add(\"active\");\r\n  }\r\n\r\n}\r\n\r\nexport function loadCustomStyle(url: string): Promise<HTMLLinkElement> {\r\n  const head = document.getElementsByTagName('head')[0];\r\n  const link = document.createElement('link');\r\n  link.rel = 'stylesheet';\r\n  link.href = url;\r\n  const isReady: Promise<HTMLLinkElement> = new Promise(resolve => {\r\n    link.onload = () => resolve(link)\r\n  })\r\n  head.appendChild(link);\r\n  return isReady\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { GisBaseService } from '../GisBase.service';\r\nimport { GisMapComponentComponent } from './gis-map-component.component';\n\n\n\n@NgModule({\n  declarations: [\n    GisMapComponentComponent\n  ],\n  imports: [\n  ],\n  exports: [\n    GisMapComponentComponent\n  ]\n})\nexport class GisMapComponentModule {\n  public static forRoot(environment: any): ModuleWithProviders<GisMapComponentModule> {\n    return {\n      ngModule: GisMapComponentModule,\n      providers: [GisBaseService, { provide: 'environmentFile', useValue: environment }]\n    };\n  }\n}\n","/*\n * Public API Surface of gis-map-component\n */\n\nexport * from './GisBase.service';\n\nexport * from './lib/gis-map-component.service';\nexport * from './lib/gis-map-component.component';\nexport * from './lib/gis-map-component.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.GisBaseService"],"mappings":"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"}