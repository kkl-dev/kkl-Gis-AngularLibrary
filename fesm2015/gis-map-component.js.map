{"version":3,"file":"gis-map-component.js","sources":["../../../projects/gis-map-component/src/GisBase.service.ts","../../../projects/gis-map-component/src/lib/gis-map-component.service.ts","../../../projects/gis-map-component/src/lib/gis-map-component.component.ts","../../../projects/gis-map-component/src/lib/gis-map-component.module.ts","../../../projects/gis-map-component/src/public-api.ts","../../../projects/gis-map-component/src/gis-map-component.ts"],"sourcesContent":["import { Inject, Injectable, isDevMode, Optional } from '@angular/core';\r\nimport { TestBed } from '@angular/core/testing';\r\n\r\n\r\n@Injectable()\r\nexport class GisBaseService {\r\n  public apiUrl = \"\";\r\n   \r\n    constructor(@Inject('environmentFile') private config: any ) {\r\n        this.apiUrl = config.GisApiUrl\r\n       //this.apiUrl = 'https://kkl-yaaranutgisapi.azurewebsites.net';\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GisMapComponentService {\n\n  constructor() { }\n}\n","import {\r\n  Component, ElementRef, OnInit, ViewChild, ViewEncapsulation, Input,  Output,  EventEmitter,  OnDestroy } from '@angular/core';\r\n\r\n \r\nimport { loadModules } from \"esri-loader\";\r\n//import esri = __esri;\r\n\r\n//import WebMap from \"@arcgis/core/WebMap\";\r\n//import MapView from \"@arcgis/core/views/MapView\";\r\n//import LayerList from \"@arcgis/core/widgets/LayerList\";\r\nimport Zoom from \"@arcgis/core/widgets/Zoom\";\r\nimport Compass from \"@arcgis/core/widgets/Compass\";\r\nimport ScaleBar from \"@arcgis/core/widgets/ScaleBar\";\r\nimport BasemapGallery from \"@arcgis/core/widgets/BasemapGallery\";\r\nimport Legend from \"@arcgis/core/widgets/Legend\";\r\nimport Measurement from \"@arcgis/core/widgets/Measurement\";\r\n//import Search from \"@arcgis/core/widgets/Search\";\r\nimport FeatureLayer from \"@arcgis/core/layers/FeatureLayer\";\r\nimport LayerView from \"@arcgis/core/views/layers/LayerView\";\r\nimport { GisBaseService } from '../GisBase.service';\r\n\r\n\r\n@Component({\r\n  selector: 'GisBase-GisMapComponent',\r\n  template: `\r\n \r\n<div class='az' style=\"width:100%;height: 100% \">\r\n    <div #mapViewNode style=\"width:100%;height: 100%  \">\r\n   \r\n      <div id=\"toolbarDiv222\" style=\"position: absolute;margin-left: -50px;\" class=\"e____sri-component esri-widget\">\r\n        <button  #buttonLegend (click)=\"buttonLegendClick()\" class=\"esri-widget--button esri-interactive esri-icon-legend\" title=\"legend Panel\">    </button>\r\n        <button  style=\"display:none\" #buttonDistance class=\"esri-widget--button esri-interactive esri-icon-measure-line\" title=\"Distance Measurement Tool\">    </button>\r\n        <button  style=\"display:none\" #buttonArea class=\"esri-widget--button esri-interactive esri-icon-measure-area\" title=\"Area Measurement Tool\">    </button>\r\n        <button  style=\"display:none\" #buttonClear class=\"esri-widget--button esri-interactive esri-icon-trash\" title=\"Clear Measurements\">     </button>\r\n      </div>\r\n  </div>\r\n</div>\r\n  `,\r\n  styleUrls: ['gis-map-component.component.css']\r\n//   < div #layerListDiv > </div>\r\n\r\n//< div #basemapGalleryDiv > </div>\r\n})\r\n  \r\nexport class GisMapComponentComponent implements OnInit {\r\n\r\n  linkProm = loadCustomStyle('https://js.arcgis.com/4.23/esri/themes/light/main.css');\r\n\r\n  private mapViewEl!: ElementRef;\r\n  @ViewChild('mapViewNode', { static: true }) set content(content: ElementRef) { if (content) { this.mapViewEl = content; } }\r\n  private layerListDiv!: ElementRef;\r\n  @ViewChild('layerListDiv', { static: true }) set content2(content: ElementRef) { if (content) { this.layerListDiv = content; }  }\r\n  private basemapGalleryDiv!: ElementRef;\r\n  @ViewChild('basemapGalleryDiv', { static: true }) set content1(content: ElementRef) {  if (content) { this.basemapGalleryDiv = content; }  }\r\n\r\n  private buttonLegend!: HTMLElement;\r\n  @ViewChild('buttonLegend', { static: true }) set content7(content: ElementRef) { if (content) { this.buttonLegend = content.nativeElement; } }\r\n  private buttonDistance!: HTMLElement;\r\n  @ViewChild('buttonDistance', { static: true }) set content3(content: ElementRef) { if (content) { this.buttonDistance = content.nativeElement; } }\r\n  private buttonArea!: HTMLElement;\r\n  @ViewChild('buttonArea', { static: true }) set content4(content: ElementRef) { if (content) { this.buttonArea = content.nativeElement; } }\r\n  private buttonClear!: HTMLElement;\r\n  @ViewChild('buttonClear', { static: true }) set content5(content: ElementRef) { if (content) { this.buttonClear = content.nativeElement; } }\r\n  private buttonSwitch!: HTMLElement;\r\n  @ViewChild('buttonSwitch', { static: true }) set content6(content: ElementRef) { if (content) { this.buttonSwitch = content.nativeElement; } }\r\n\r\n   \r\n  private layerHelkotView!: LayerView\r\n  private LayerList!: string[];\r\n  private QueryLayer!: string;\r\n  private QueryStr!: string;\r\n  private legend!: Legend;\r\n\r\n  @Input()\r\n  set layerList(value: string[]) {\r\n    this.LayerList = value;\r\n  }\r\n  @Input()\r\n  set queryLayer(value: string) {    \r\n    this.QueryLayer = value;\r\n  }\r\n  @Input()\r\n  set queryStr(value: string) {\r\n    this.QueryStr = value;\r\n  }\r\n   \r\n  private queryFeatureLayer! : FeatureLayer\r\n  //public mapView: MapView = new MapView();\r\n  //public featerLayer: FeatureLayer = new FeatureLayer();\r\n  //public featerLayer1: FeatureLayer = new FeatureLayer();\r\n\r\n  constructor(private gisBaseService: GisBaseService) { }\r\n\r\n  \r\n  async initializeMap() {\r\n    try {\r\n      await this.linkProm;\r\n      \r\n      const [MapView, WebMap, LayerList, Search  , FeatureLayer] = await loadModules([        \r\n        \"esri/views/MapView\", \"esri/WebMap\",\r\n        \"esri/widgets/LayerList\", \"esri/widgets/Search\",\r\n        \"esri/layers/FeatureLayer\"\r\n      ]);\r\n\r\n      const webMap = new WebMap({\r\n        basemap: \"topo\"\r\n      });\r\n\r\n      let view = new MapView({\r\n        container: this.mapViewEl.nativeElement,\r\n        map: webMap\r\n      });\r\n\r\n    //  let featerLayer = new FeatureLayer({\r\n    //  //url: \"https://services2.arcgis.com/utNNrmXb4IZOLXXs/ArcGIS/rest/services/JNFILForest/FeatureServer/0\"\r\n    //  url: \"https://kklrgm.kkl.org.il/kklags/rest/services/allLayersForAgol/FeatureServer/7\"\r\n    //});\r\n    //let featerLayer1 = new FeatureLayer({\r\n    //  url: \"https://services2.arcgis.com/utNNrmXb4IZOLXXs/ArcGIS/rest/services/JNFILForest/FeatureServer\"      \r\n    //});\r\n\r\n      this.LayerList.forEach((layerStr)=>   {\r\n        const featureLayer = new FeatureLayer({\r\n          url: this.gisBaseService.apiUrl +\"/ArcGIS/rest/services/\"+ layerStr\r\n        });\r\n        webMap.add(featureLayer);\r\n        if (layerStr.includes(this.QueryLayer)) { this.queryFeatureLayer = featureLayer }\r\n      });\r\n      \r\n      await view.when(() => {\r\n        var layerList = new LayerList({ view: view  });\r\n        //view.ui.add(layerList, \"top-right\");\r\n        var search = new Search({ view: view});\r\n        //view.ui.add(search, \"top-right\");\r\n        var zoom = new Zoom({  view: view,  layout: \"horizontal\"  });\r\n        //view.ui.add(zoom, \"bottom-right\");\r\n        const compassWidget = new Compass({  view: view   });\r\n        view.ui.add(compassWidget, \"top-left\");\r\n        const scaleBar = new ScaleBar({ view: view, unit: \"metric\", style: \"ruler\"    });\r\n        //view.ui.add(scaleBar, { position: \"bottom-left\"});\r\n        //const basemapGallery = new BasemapGallery({  view: view,    container: document.createElement(\"div\")    });\r\n        //view.ui.add(basemapGallery, {   position: \"top-right\"    });\r\n        //let legend = new Legend({  view: view   });\r\n        //view.ui.add(legend, \"bottom-right\");\r\n\r\n        //var measurement = new Measurement({ view: view });\r\n\r\n        //// Create new instance of the Legend widget\r\n        this.legend = new Legend({ view: view, style: { type: \"classic\", layout: 'stack' }, layerInfos: [{ layer: this.queryFeatureLayer, title: \"שכבת חלקות\" }] });\r\n        view.ui.add(this.legend, \"bottom-right\");\r\n\r\n        //view.ui.add(measurement, \"bottom-right\");\r\n        \r\n        ////this.buttonSwitch.addEventListener(\"click\", () => { this.switchView(Map, this.queryFeatureLayer,  measurement); });\r\n        //this.buttonDistance.addEventListener(\"click\", () => { this.distanceMeasurement( measurement); });\r\n        //this.buttonArea.addEventListener(\"click\", () => { this.areaMeasurement(measurement); });\r\n        //this.buttonClear.addEventListener(\"click\", () => { this.clearMeasurements(measurement); });\r\n\r\n        //const EsriPwoerByelements = document.getElementsByClassName(\"esri-attribution__sources esri-interactive\");\r\n        //for (let i = 0; i < EsriPwoerByelements.length; i++) {\r\n        //  EsriPwoerByelements[i].setAttribute(\"style\", \"display:none\");\r\n        //}\r\n        const EsriPwoerByelements1 = document.getElementsByClassName(\"esri-attribution__powered-by\");        \r\n        for (let i = 0; i < EsriPwoerByelements1.length; i++) {\r\n          EsriPwoerByelements1[i].setAttribute(\"style\", \"display:none\");\r\n          const az = EsriPwoerByelements1[i].previousElementSibling;\r\n          if (az!=null) az.setAttribute(\"style\", \"display:none\");\r\n        }\r\n        \r\n        //this.featerLayerHelkot.definitionExpression = \"GUSH_NUM=\" + this._gush + \" and PARCEL=\" + this._PARCEL;\r\n        //this.featerLayerHelkot.when(\r\n        //  () => {\r\n            //const query = this.featerLayerHelkot.createQuery();\r\n            //query.where = \"GUSH_NUM=\" + this._gush + \" and PARCEL=\" + this._PARCEL;\r\n            //query.outSpatialReference = view.spatialReference;\r\n            //var az = this.featerLayerHelkot.queryFeatures(query)\r\n            //az.then(function (results) {\r\n            //  view.highlight(results);\r\n            //});  \r\n            //this.featerLayerHelkot.queryExtent(query)\r\n            //  .then(response => {\r\n            //    if (response.extent !== null) {\r\n            //      response.extent.spatialReference = view.spatialReference;\r\n            //      view.goTo(response.extent.expand(3));\r\n                  \r\n            //    }\r\n            //  });\r\n         /* });*/\r\n      });\r\n\r\n      view.whenLayerView(this.queryFeatureLayer).then((layerView: any  ) => {\r\n\r\n        \r\n        \r\n\r\n        const query = this.queryFeatureLayer.createQuery();\r\n        query.where =  this.QueryStr;\r\n        query.outSpatialReference = view.spatialReference;\r\n        var az = this.queryFeatureLayer.queryFeatures(query)\r\n        az.then(function (results) {\r\n          layerView.highlight(results.features[0]);\r\n          view.goTo({ geometry: results.features[0].geometry.extent.expand(3) });\r\n        });\r\n        //this.queryFeatureLayer.queryExtent(query)\r\n        //  .then(response => {\r\n        //    if (response.extent !== null) {\r\n        //      response.extent.spatialReference = view.spatialReference;\r\n        //      view.goTo({  geometry: response.extent.expand(3) });\r\n        //    }\r\n        //  });\r\n      });\r\n      return view;\r\n    }\r\n    catch(error) {\r\n      console.log(\"EsriLoader: \", error);\r\n    }\r\n  }   \r\n\r\n  ngOnInit()  {\r\n    this.initializeMap().then(() => {\r\n      console.log(\"View ready\");\r\n    });    \r\n  }\r\n\r\n  buttonLegendClick() {\r\n    this.legend.visible = !this.legend.visible;\r\n  }\r\n  switchView(Map: MapConstructor, layerView: any, measurement: any) {\r\n\r\n    // Clone the viewpoint for the MapView or SceneView\r\n    const viewpoint = layerView.viewpoint.clone();\r\n    // Get the view type, either 2d or 3d\r\n    const type = layerView.type;\r\n\r\n    // Clear any measurements that had been drawn\r\n    this.clearMeasurements(measurement);\r\n\r\n    // Reset the measurement tools in the div\r\n    layerView.container = null;\r\n    layerView = null;\r\n    // Set the view based on whether it switched to 2D MapView or 3D SceneView\r\n    layerView = Map;\r\n    layerView.set({\r\n      container: \"viewDiv\",\r\n      viewpoint: viewpoint\r\n    });\r\n  }\r\n  clearMeasurements(measurement: any) {\r\n    const distanceButton = document.getElementById('distance');\r\n    const areaButton = document.getElementById('area');\r\n    this.buttonDistance.classList.remove(\"active\");\r\n    this.buttonArea.classList.remove(\"active\");\r\n    measurement.clear();\r\n  }\r\n  distanceMeasurement(  measurement: any) {\r\n    measurement.activeTool  = \"distance\";\r\n    alert(measurement.activeWidget);\r\n    this.buttonDistance.classList.add(\"active\");\r\n    this.buttonArea.classList.remove(\"active\");\r\n  }\r\n  areaMeasurement(measurement: any) {\r\n    measurement.activeTool = \"area\";\r\n    this.buttonDistance.classList.remove(\"active\");\r\n    this.buttonArea.classList.add(\"active\");\r\n  }\r\n\r\n}\r\n\r\nexport function loadCustomStyle(url: string): Promise<HTMLLinkElement> {\r\n  const head = document.getElementsByTagName('head')[0];\r\n  const link = document.createElement('link');\r\n  link.rel = 'stylesheet';\r\n  link.href = url;\r\n  const isReady: Promise<HTMLLinkElement> = new Promise(resolve => {\r\n    link.onload = () => resolve(link)\r\n  })\r\n  head.appendChild(link);\r\n  return isReady\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { GisBaseService } from '../GisBase.service';\r\nimport { GisMapComponentComponent } from './gis-map-component.component';\n\n\n\n@NgModule({\n  declarations: [\n    GisMapComponentComponent\n  ],\n  imports: [\n  ],\n  exports: [\n    GisMapComponentComponent\n  ]\n})\nexport class GisMapComponentModule {\n  public static forRoot(environment: any): ModuleWithProviders<GisMapComponentModule> {\n    return {\n      ngModule: GisMapComponentModule,\n      providers: [GisBaseService, { provide: 'environmentFile', useValue: environment }]\n    };\n  }\n}\n","/*\n * Public API Surface of gis-map-component\n */\n\nexport * from './GisBase.service';\n\nexport * from './lib/gis-map-component.service';\nexport * from './lib/gis-map-component.component';\nexport * from './lib/gis-map-component.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.GisBaseService"],"mappings":"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"}